/* Modernizr 2.5.3 (Custom Build) | MIT & BSD
 * Build: http://modernizr.com/download/#-touch-teststyles-prefixes
 */function TkMap(e){var t=typeof e.lat!="undefined"?e.lat:null,n=typeof e.lng!="undefined"?e.lng:null,r=typeof e.domid!="undefined"?e.domid:null,s=typeof e.zoom!="undefined"?e.zoom:15,o=typeof e.init!="undefined"?e.init:!1,u=typeof e.responsive!="undefined"?e.responsive:!1,a=typeof e.styles!="undefined"?e.styles:null,f={center:new google.maps.LatLng(t,n),draggable:!0,mapTypeControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!1,streetViewControl:!1,styles:[],zoom:s,zoomControl:!0},l=!1,c=null,h=null;this.Map=null;var p=function(e){l=!0;c=e.touches[0].pageY},d=function(){l=!1},v=function(e){if(!l)return;h=e.touches[0].pageY;window.scrollBy(0,c-h)},m=function(){var e=a.split(" ");for(i in e)if(e[i]==="satellite")f.mapTypeId=google.maps.MapTypeId.SATELLITE;else if(e[i]==="hybrid")f.mapTypeId=google.maps.MapTypeId.HYBRID;else if(e[i]==="road")f.mapTypeId=google.maps.MapTypeId.ROADMAP;else if(e[i]==="terrain")f.mapTypeId=google.maps.MapTypeId.TERRAIN;else if(e[i]==="minlabels")f.styles.push({featureType:"all",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"}]});else if(e[i]==="grey"){f.backgroundColor="#C5C5C5";f.styles.push({stylers:[{saturation:-67}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{lightness:85}]},{featureType:"water",stylers:[{lightness:-40}]})}},g=function(){var e=$("#"+r).width();e<481?f.zoom--:e>959&&f.zoom++};this.initMap=function(){if(this.Map===null){a!==null&&m();u&&g();this.Map=new google.maps.Map(document.getElementById(r),f)}};this.setMapOptions=function(e){this.Map!==null&&$.extend(f,e)};this.setTouchScroll=function(e){var t=document.getElementById(r);if(e){t.addEventListener("touchstart",p,!0);t.addEventListener("touchend",d,!0);t.addEventListener("touchmove",v,!0);this.Map.setOptions({zoomControl:!1})}else{t.removeEventListener("touchstart",p,!0);t.removeEventListener("touchend",d,!0);t.removeEventListener("touchmove",v,!0);this.Map.setOptions({zoomControl:!0,zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP}})}};this.setPanZoom=function(e){var t;e?t=!1:t=!0;this.Map.setOptions({disableDoubleClickZoom:t,draggable:e,keyboardShortcuts:e,scrollwheel:e,zoomControl:e})};o===!0&&this.initMap()}function InfoBox(e){e=e||{};google.maps.OverlayView.apply(this,arguments);this.content_=e.content||"";this.disableAutoPan_=e.disableAutoPan||!1;this.maxWidth_=e.maxWidth||0;this.pixelOffset_=e.pixelOffset||new google.maps.Size(0,0);this.position_=e.position||new google.maps.LatLng(0,0);this.zIndex_=e.zIndex||null;this.boxClass_=e.boxClass||"infoBox";this.boxStyle_=e.boxStyle||{};this.closeBoxMargin_=e.closeBoxMargin||"2px";this.closeBoxURL_=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif";e.closeBoxURL===""&&(this.closeBoxURL_="");this.infoBoxClearance_=e.infoBoxClearance||new google.maps.Size(1,1);this.isHidden_=e.isHidden||!1;this.alignBottom_=e.alignBottom||!1;this.pane_=e.pane||"floatPane";this.enableEventPropagation_=e.enableEventPropagation||!1;this.div_=null;this.closeListener_=null;this.eventListener1_=null;this.eventListener2_=null;this.eventListener3_=null;this.moveListener_=null;this.contextListener_=null;this.fixedWidthSet_=null}window.Modernizr=function(e,t,n){function r(e){p.cssText=e}function i(e,t){return r(m.join(e+";")+(t||""))}function s(e,t){return typeof e===t}function o(e,t){return!!~(""+e).indexOf(t)}function u(e,t,r){for(var i in e){var o=t[e[i]];if(o!==n)return r===!1?e[i]:s(o,"function")?o.bind(r||t):o}return!1}var a="2.5.3",f={},l=t.documentElement,c="modernizr",h=t.createElement(c),p=h.style,d,v={}.toString,m=" -webkit- -moz- -o- -ms- ".split(" "),g={},y={},b={},w=[],E=w.slice,S,x=function(e,n,r,i){var s,o,u,a=t.createElement("div"),f=t.body,h=f?f:t.createElement("body");if(parseInt(r,10))while(r--)u=t.createElement("div"),u.id=i?i[r]:c+(r+1),a.appendChild(u);return s=["&#173;","<style>",e,"</style>"].join(""),a.id=c,(f?a:h).innerHTML+=s,h.appendChild(a),f||(h.style.background="",l.appendChild(h)),o=n(a,e),f?a.parentNode.removeChild(a):h.parentNode.removeChild(h),!!o},T={}.hasOwnProperty,N;!s(T,"undefined")&&!s(T.call,"undefined")?N=function(e,t){return T.call(e,t)}:N=function(e,t){return t in e&&s(e.constructor.prototype[t],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if(typeof t!="function")throw new TypeError;var n=E.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var s=new i,o=t.apply(s,n.concat(E.call(arguments)));return Object(o)===o?o:s}return t.apply(e,n.concat(E.call(arguments)))};return r});var C=function(n,r){var i=n.join(""),s=r.length;x(i,function(n,r){var i=t.styleSheets[t.styleSheets.length-1],o=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"",u=n.childNodes,a={};while(s--)a[u[s].id]=u[s];f.touch="ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch||(a.touch&&a.touch.offsetTop)===9},s,r)}([,["@media (",m.join("touch-enabled),("),c,")","{#touch{top:9px;position:absolute}}"].join("")],[,"touch"]);g.touch=function(){return f.touch};for(var k in g)N(g,k)&&(S=k.toLowerCase(),f[S]=g[k](),w.push((f[S]?"":"no-")+S));return r(""),h=d=null,f._version=a,f._prefixes=m,f.testStyles=x,f}(this,this.document);InfoBox.prototype=new google.maps.OverlayView;InfoBox.prototype.createInfoBoxDiv_=function(){var e,t=this,n=function(e){e.cancelBubble=!0;e.stopPropagation&&e.stopPropagation()},r=function(e){e.returnValue=!1;e.preventDefault&&e.preventDefault();t.enableEventPropagation_||n(e)};if(!this.div_){this.div_=document.createElement("div");this.setBoxStyle_();if(typeof this.content_.nodeType=="undefined")this.div_.innerHTML=this.getCloseBoxImg_()+this.content_;else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(this.content_)}this.getPanes()[this.pane_].appendChild(this.div_);this.addClickHandler_();if(this.div_.style.width)this.fixedWidthSet_=!0;else if(this.maxWidth_!==0&&this.div_.offsetWidth>this.maxWidth_){this.div_.style.width=this.maxWidth_;this.div_.style.overflow="auto";this.fixedWidthSet_=!0}else{e=this.getBoxWidths_();this.div_.style.width=this.div_.offsetWidth-e.left-e.right+"px";this.fixedWidthSet_=!1}this.panBox_(this.disableAutoPan_);if(!this.enableEventPropagation_){this.eventListener1_=google.maps.event.addDomListener(this.div_,"mousedown",n);this.eventListener2_=google.maps.event.addDomListener(this.div_,"click",n);this.eventListener3_=google.maps.event.addDomListener(this.div_,"dblclick",n)}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",r);google.maps.event.trigger(this,"domready")}};InfoBox.prototype.getCloseBoxImg_=function(){var e="";if(this.closeBoxURL_!==""){e="<img";e+=" src='"+this.closeBoxURL_+"'";e+=" align=right";e+=" style='";e+=" position: relative;";e+=" cursor: pointer;";e+=" margin: "+this.closeBoxMargin_+";";e+="'>"}return e};InfoBox.prototype.addClickHandler_=function(){var e;if(this.closeBoxURL_!==""){e=this.div_.firstChild;this.closeListener_=google.maps.event.addDomListener(e,"click",this.getCloseClickHandler_())}else this.closeListener_=null};InfoBox.prototype.getCloseClickHandler_=function(){var e=this;return function(t){t.cancelBubble=!0;t.stopPropagation&&t.stopPropagation();e.close();google.maps.event.trigger(e,"closeclick")}};InfoBox.prototype.panBox_=function(e){var t,n,r=0,i=0;if(!e){t=this.getMap();if(t instanceof google.maps.Map){t.getBounds().contains(this.position_)||t.setCenter(this.position_);n=t.getBounds();var s=t.getDiv(),o=s.offsetWidth,u=s.offsetHeight,a=this.pixelOffset_.width,f=this.pixelOffset_.height,l=this.div_.offsetWidth,c=this.div_.offsetHeight,h=this.infoBoxClearance_.width,p=this.infoBoxClearance_.height,d=this.getProjection().fromLatLngToContainerPixel(this.position_);d.x<-a+h?r=d.x+a-h:d.x+l+a+h>o&&(r=d.x+l+a+h-o);this.alignBottom_?d.y<-f+p+c?i=d.y+f-p-c:d.y+f+p>u&&(i=d.y+f+p-u):d.y<-f+p?i=d.y+f-p:d.y+c+f+p>u&&(i=d.y+c+f+p-u);if(r!==0||i!==0){var v=t.getCenter();t.panBy(r,i)}}}};InfoBox.prototype.setBoxStyle_=function(){var e,t;if(this.div_){this.div_.className=this.boxClass_;this.div_.style.cssText="";t=this.boxStyle_;for(e in t)t.hasOwnProperty(e)&&(this.div_.style[e]=t[e]);typeof this.div_.style.opacity!="undefined"&&this.div_.style.opacity!==""&&(this.div_.style.filter="alpha(opacity="+this.div_.style.opacity*100+")");this.div_.style.position="absolute";this.div_.style.visibility="hidden";this.zIndex_!==null&&(this.div_.style.zIndex=this.zIndex_)}};InfoBox.prototype.getBoxWidths_=function(){var e,t={top:0,bottom:0,left:0,right:0},n=this.div_;if(document.defaultView&&document.defaultView.getComputedStyle){e=n.ownerDocument.defaultView.getComputedStyle(n,"");if(e){t.top=parseInt(e.borderTopWidth,10)||0;t.bottom=parseInt(e.borderBottomWidth,10)||0;t.left=parseInt(e.borderLeftWidth,10)||0;t.right=parseInt(e.borderRightWidth,10)||0}}else if(document.documentElement.currentStyle&&n.currentStyle){t.top=parseInt(n.currentStyle.borderTopWidth,10)||0;t.bottom=parseInt(n.currentStyle.borderBottomWidth,10)||0;t.left=parseInt(n.currentStyle.borderLeftWidth,10)||0;t.right=parseInt(n.currentStyle.borderRightWidth,10)||0}return t};InfoBox.prototype.onRemove=function(){if(this.div_){this.div_.parentNode.removeChild(this.div_);this.div_=null}};InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var e=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=e.x+this.pixelOffset_.width+"px";this.alignBottom_?this.div_.style.bottom=-(e.y+this.pixelOffset_.height)+"px":this.div_.style.top=e.y+this.pixelOffset_.height+"px";this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"};InfoBox.prototype.setOptions=function(e){if(typeof e.boxClass!="undefined"){this.boxClass_=e.boxClass;this.setBoxStyle_()}if(typeof e.boxStyle!="undefined"){this.boxStyle_=e.boxStyle;this.setBoxStyle_()}typeof e.content!="undefined"&&this.setContent(e.content);typeof e.disableAutoPan!="undefined"&&(this.disableAutoPan_=e.disableAutoPan);typeof e.maxWidth!="undefined"&&(this.maxWidth_=e.maxWidth);typeof e.pixelOffset!="undefined"&&(this.pixelOffset_=e.pixelOffset);typeof e.position!="undefined"&&this.setPosition(e.position);typeof e.zIndex!="undefined"&&this.setZIndex(e.zIndex);typeof e.closeBoxMargin!="undefined"&&(this.closeBoxMargin_=e.closeBoxMargin);typeof e.closeBoxURL!="undefined"&&(this.closeBoxURL_=e.closeBoxURL);typeof e.infoBoxClearance!="undefined"&&(this.infoBoxClearance_=e.infoBoxClearance);typeof e.isHidden!="undefined"&&(this.isHidden_=e.isHidden);typeof e.enableEventPropagation!="undefined"&&(this.enableEventPropagation_=e.enableEventPropagation);this.div_&&this.draw()};InfoBox.prototype.setContent=function(e){this.content_=e;if(this.div_){if(this.closeListener_){google.maps.event.removeListener(this.closeListener_);this.closeListener_=null}this.fixedWidthSet_||(this.div_.style.width="");if(typeof e.nodeType=="undefined")this.div_.innerHTML=this.getCloseBoxImg_()+e;else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(e)}if(!this.fixedWidthSet_){this.div_.style.width=this.div_.offsetWidth+"px";this.div_.innerHTML=this.getCloseBoxImg_()+e}this.addClickHandler_()}google.maps.event.trigger(this,"content_changed")};InfoBox.prototype.setPosition=function(e){this.position_=e;this.div_&&this.draw();google.maps.event.trigger(this,"position_changed")};InfoBox.prototype.setZIndex=function(e){this.zIndex_=e;this.div_&&(this.div_.style.zIndex=e);google.maps.event.trigger(this,"zindex_changed")};InfoBox.prototype.getContent=function(){return this.content_};InfoBox.prototype.getPosition=function(){return this.position_};InfoBox.prototype.getZIndex=function(){return this.zIndex_};InfoBox.prototype.show=function(){this.isHidden_=!1;this.div_&&(this.div_.style.visibility="visible")};InfoBox.prototype.hide=function(){this.isHidden_=!0;this.div_&&(this.div_.style.visibility="hidden")};InfoBox.prototype.open=function(e,t){var n=this;if(t){this.position_=t.getPosition();this.moveListener_=google.maps.event.addListener(t,"position_changed",function(){n.setPosition(this.getPosition())})}this.setMap(e);this.div_&&this.panBox_()};InfoBox.prototype.close=function(){if(this.closeListener_){google.maps.event.removeListener(this.closeListener_);this.closeListener_=null}if(this.eventListener1_){google.maps.event.removeListener(this.eventListener1_);google.maps.event.removeListener(this.eventListener2_);google.maps.event.removeListener(this.eventListener3_);this.eventListener1_=null;this.eventListener2_=null;this.eventListener3_=null}if(this.moveListener_){google.maps.event.removeListener(this.moveListener_);this.moveListener_=null}if(this.contextListener_){google.maps.event.removeListener(this.contextListener_);this.contextListener_=null}this.setMap(null)};(function(){var e=41.85,t=-87.675,n=[],r={};r.LatLngs=[];r.Markers=[];r.InfoBox=[];r.InfoBoxText=[];r.openInfoBox=function(e,t,n){return function(){n.open(e,t)}};r.closeInfoBox=function(e,t,n){return function(){n.close(e,t)}};$(function(){function f(){console.log("centeronschool")}function l(){console.log("centeronuser")}function c(e,t){e.style.padding="1em";var n=document.createElement("div");n.style.backgroundColor="white";n.style.borderStyle="solid";n.style.borderWidth="2px";n.style.cursor="pointer";n.style.textAlign="center";n.title="Click to set the map to Home";e.appendChild(n);var r=document.createElement("div");r.style.fontFamily="sans-serif";r.style.fontSize="12px";r.style.paddingLeft=".5em";r.style.paddingRight=".5em";r.style.paddingTop=".3em";r.style.paddingBottom=".3em";r.innerHTML="Maximize";n.appendChild(r);google.maps.event.addDomListener(n,"click",function(){if(i.Map.zoomControl==0){i.setPanZoom(!0);i.setTouchScroll(!1);var e=i.Map.getCenter();$("#before-map,#div-footer").hide(750,function(){$("#map-width").css("height","100%");$("#map-ratio").css("margin-top",window.innerHeight);$("#div-map").offset().top;r.innerHTML="Minimize";i.Map.setCenter(e);google.maps.event.trigger(i.Map,"resize")})}else{i.setPanZoom(!1);i.setTouchScroll(!0);var e=i.Map.getCenter();$("#before-map,#div-footer").show(750,function(){$("#map-width").css("height","");$("#map-ratio").css("margin-top","200px");r.innerHTML="Maximize";i.Map.setCenter(e);google.maps.event.trigger(i.Map,"resize")})}})}$("#loadingmsg").hide().ajaxStart(function(){$(this).show()}).ajaxStop(function(){$(this).hide()});var i=new TkMap({domid:"map",lat:e,lng:t,styles:"grey",zoom:14});i.initMap();i.setPanZoom(!1);i.setTouchScroll(!0);var s=document.createElement("div"),o=new c(s,i.Map);s.index=1;i.Map.controls[google.maps.ControlPosition.TOP_RIGHT].push(s);var u=encodeURIComponent("SELECT lat, lng, shortname, address, postalcode, phone, start, end, afterstart, afterend FROM 1QQu0GHzbkKk5OdAl2VaaY2sm1Ggoc8Vo5GfiGLI"),a=["https://www.googleapis.com/fusiontables/v1/query"];a.push("?sql="+u);a.push("&key=AIzaSyDH5WuL3gKYVBWVqLr6g3PQffdZE-XhBUw");a.push("&callback=?");$.ajax({url:a.join(""),dataType:"jsonp",success:function(e){for(var t in e.rows){n.push(e.rows[t][2]);r.LatLngs[t]=new google.maps.LatLng(e.rows[t][0],e.rows[t][1]);r.Markers[t]=new google.maps.Marker({position:r.LatLngs[t],map:i.Map,icon:"/img/blue.png",shadow:"img/msmarker.shadow.png"});r.InfoBoxText[t]='<div class="infoBox" style="border:1px solid rgb(0,0,0); margin-top:8px; background:rgb(255,189,136); padding:5px; font-size:80%;">'+e.rows[t][2]+"<br />"+e.rows[t][3]+"<br />"+e.rows[t][5]+"<br /></div>";var s={content:r.InfoBoxText[t],disableAutoPan:!1,maxWidth:0,pixelOffset:new google.maps.Size(-140,0),zIndex:null,boxStyle:{background:"url('img/tipbox.gif') no-repeat",opacity:.95,width:"160px"},closeBoxMargin:"10px 2px 2px 2px",closeBoxURL:"http://www.google.com/intl/en_us/mapfiles/close.gif",infoBoxClearance:new google.maps.Size(1,1),isHidden:!1,pane:"floatPane",enableEventPropagation:!1};r.InfoBox[t]=new InfoBox(s);google.maps.event.addListener(r.Markers[t],"mouseover",r.openInfoBox(i.Map,r.Markers[t],r.InfoBox[t]));google.maps.event.addListener(r.Markers[t],"click",r.openInfoBox(i.Map,r.Markers[t],r.InfoBox[t]));google.maps.event.addListener(r.Markers[t],"mouseout",r.closeInfoBox(i.Map,r.Markers[t],r.InfoBox[t]))}$("#school").typeahead({source:n,items:3,minLength:1})}});$("#school").blur(function(){f()});$("#btn-find-school").click(function(){f()});$("#location").blur(function(){f()});$("#btn-search-location").click(function(){f()})})})();